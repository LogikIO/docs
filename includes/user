<h1 id="users">Users</h1>

<h2 id="local-auth">Local Auth</h2>

<p>A local authentication flow for login and signups is baked in to every Stamplay application.</p>

<h3 id="signup">Signup</h3>
<pre class="highlight shell"><code>    curl -X <span class="s2">"POST"</span> <span class="s2">"https://APP-ID.stamplayapp.com/api/user/v1/users"</span> <span class="se">\</span>
        -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
        -d <span class="s2">"{</span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">user@stamplay.com</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">my_password</span><span class="se">\"</span><span class="s2">}"</span>
</code></pre>
<pre class="highlight javascript"><code>    <span class="kd">var</span> <span class="nx">credentials</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">email</span> <span class="p">:</span> <span class="s2">"user@stamplay.com"</span><span class="p">,</span>
        <span class="na">password</span> <span class="p">:</span> <span class="s2">"my_password"</span>
    <span class="p">}</span>

    <span class="nx">Stamplay</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">signup</span><span class="p">(</span><span class="nx">credentials</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// success</span>
        <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// error    </span>
        <span class="p">})</span>
</code></pre>
<pre class="highlight nodejs"><code>    <span class="kd">var</span> <span class="nx">credentials</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">email</span> <span class="p">:</span> <span class="s2">"user@stamplay.com"</span><span class="p">,</span>
        <span class="na">password</span> <span class="p">:</span> <span class="s2">"my_password"</span>
    <span class="p">}</span>

    <span class="nx">Stamplay</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">save</span><span class="p">(</span><span class="nx">credentials</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// response</span>
    <span class="p">})</span>
</code></pre>

<p>To signup or add a user for a local account, send an email and password as the body of the request to Stamplay, with any additional data to save to the new user record.</p>

<h3 id="login">Login</h3>
<pre class="highlight shell"><code>    curl -X <span class="s2">"POST"</span> <span class="s2">"https://APP-ID.stamplayapp.com/auth/v1/local/login"</span> <span class="se">\</span>
        -H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
        -d <span class="s2">"{</span><span class="se">\"</span><span class="s2">email</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">user@stamplay.com</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">password</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">my_password</span><span class="se">\"</span><span class="s2">}"</span>
</code></pre>
<pre class="highlight javascript"><code>    <span class="kd">var</span> <span class="nx">credentials</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">email</span> <span class="p">:</span> <span class="s2">"user@stamplay.com"</span><span class="p">,</span>
        <span class="na">password</span> <span class="p">:</span> <span class="s2">"my_password"</span>
    <span class="p">}</span>

    <span class="nx">Stamplay</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="nx">credentials</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// success</span>
        <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
            <span class="c1">// error    </span>
        <span class="p">})</span>
</code></pre>
<pre class="highlight nodejs"><code>    <span class="c1">// no method</span>
</code></pre>

<p>To authenticate a user&rsquo;s credentials for a local account, send an email and password as the body of the request to Stamplay.</p>

<h2 id="social-auth">Social Auth</h2>

<p>Authentication via an array of different social provider is possibled by some minor configuration with the Stamplay editor, and a simple request to the Stamplay API.</p>

<h3 id="facebook">Facebook</h3>

<p>Follow the instructions below to add the Facebook provider to your Stamplay application.</p>

<p><strong>Create a Facebook App</strong></p>

<p>1.1. Go to Facebook developers.</p>

<p><strong>1.2.</strong> In the upper right corner, click on <strong>Add a New App</strong>.</p>

<p><strong>1.3.</strong> Choose the type of app you want to create.</p>

<p><strong>1.4.</strong> Name your Facebook App and select <strong>Create Facebook App Id</strong>.</p>

<p><strong>1.5.</strong> Skip the Quick Start by clicking on the button in the upper right corner.</p>

<hr>

<p><strong>Configure the Facebook App Settings</strong></p>

<p><strong>2.1.</strong> Click on <strong>Settings</strong> in the left menu.</p>

<p><strong>2.2.</strong> Click on <strong>+ Add Platform</strong>.</p>

<p><strong>2.3.</strong> Fill the <strong>Site Url</strong> field with your Stamplay domain: <code class="prettyprint">https://[appId].stamplayapp.com</code> (and/or your custom domain if you have a paid plan).</p>

<p><strong>2.4.</strong> From the <strong>Settings</strong> view click on the <strong>Advanced</strong> tab and type in the <strong>OAuth Redirect URIs</strong> the following: <code class="prettyprint">https://[appId].stamplayapp.com/auth/v1/facebook/callback</code> and <code class="prettyprint">https://localhost:8080/auth/v1/facebook/callback</code> so that you can also test the signup flow locally when using Stamplay Command Line.</p>

<hr>

<p><strong>Add The Facebook App Credentials To Stamplay</strong></p>

<p><strong>3.1.</strong> Copy the <code class="prettyprint">App Id</code> and <code class="prettyprint">App Secret</code> from the Facebook App and add the values to the corresponding field inside the Stamplay editor in the <strong>Users</strong> - <strong>Authentication</strong> section.</p>

<p><strong>3.2.</strong> To test the social login integration, copy and paste this link with your <code class="prettyprint">APP ID</code> into a browser: <code class="prettyprint">https://[appId].stamplayapp.com/auth/v1/facebook/connect</code>. After connecting your account, check the <strong>DATA</strong> section to inspect the new User record created.</p>

<p><strong>3.3.</strong> The steps covered in this guide are not enough to have a Facebook app approved for production. You need to provide other information and submit the app for review; the process can take many days to complete. Refer to Facebook documentation for more information.</p>
<pre class="highlight shell"><code>    curl -X <span class="s2">"GET"</span> <span class="s2">"https://APP-ID.stamplayapp.com/auth/v1/facebook/connect"</span>
</code></pre>
<pre class="highlight javascript"><code>    <span class="nx">Stamplay</span><span class="p">.</span><span class="nx">User</span><span class="p">.</span><span class="nx">login</span><span class="p">(</span><span class="s2">"facebook"</span><span class="p">)</span>
</code></pre>
<pre class="highlight nodejs"><code>    <span class="c1">// no method</span>
</code></pre>

<p>Stamplay asks for the following permissions:</p>

<ul>
<li><code class="prettyprint">public_profile</code></li>
<li><code class="prettyprint">email</code></li>
<li><code class="prettyprint">user_friends</code></li>
</ul>

<p>We store data from <code class="prettyprint">public_profile</code> and <code class="prettyprint">email</code>. Refer to the Facebook documentation for more information.</p>

<h3 id="google">Google+</h3>

<p><strong>Create a Google Client Id</strong></p>

<p><strong>1.1.</strong> Go to <a href="https://code.google.com/apis/console">https://code.google.com/apis/console</a> and create an APIs project.</p>

<p><strong>1.2.</strong> Click on <strong>Credentials</strong> from the <strong>API &amp; Auth</strong> section of the left menu.</p>

<p><strong>1.3.</strong> Click on <strong>Create new Client Id</strong> button.</p>

<hr>

<p><strong>Configure the Client ID</strong></p>

<p><strong>2.1.</strong> Choose the type <strong>Web application</strong> and click on <strong>Configure Consent Screen</strong> button.</p>

<p><strong>2.2.</strong> Add the required information to the consent screen and save.</p>

<p><strong>2.3.</strong> Fill in the <strong>Authorized Javascripts Origins</strong> field with your Stamplay 
    domain: https://[appId].stamplayapp.com (and/or your custom domain if you have a paid plan).</p>

<p><strong>2.4.</strong> Fill in the <strong>Authorized Redirect URIs</strong> field with the following value: https://[appId].stamplayapp.com/auth/v1/google/callback.</p>

<p><strong>2.5.</strong> Click on <strong>Create client ID</strong></p>

<hr>

<p><strong>Add the Google+ Integration To Stamplay</strong></p>

<p><strong>3.1.</strong> Copy the <strong>Client Id</strong> and <strong>Client Secret</strong> from the Google App and add the values to the Stamplay app.</p>

<p><strong>3.2.</strong> To quickly test the integration, copy and paste this link into your browser: <code class="prettyprint">https://[appId].stamplayapp.com/auth/v1/google/connect</code>.</p>

<p><strong>3.3.</strong> Then click on <strong>Users</strong> in the left menu of the Editor to browse the data fetched.</p>

<p>Stamplay asks for the following permissions:</p>

<p>Stamplay asks for the following permissions:</p>

<ul>
<li><code class="prettyprint">userinfo.profile</code></li>
<li><code class="prettyprint">userinfo.email</code></li>
</ul>

<p>Refer to the Google documentation for more information.</p>

<h3 id="twitter">Twitter</h3>

<h3 id="dropbox">Dropbox</h3>

<h3 id="linkedin">Linkedin</h3>

<h3 id="instagram">Instagram</h3>

<h3 id="github">Github</h3>

<h3 id="angellist">Angellist</h3>

<h2 id="sessions">Sessions</h2>

<h2 id="logout">Logout</h2>

<h2 id="permissions">Permissions</h2>

<h2 id="updating-an-object">Updating an Object</h2>

<h2 id="partially-updating-an-user">Partially Updating an User</h2>

<h2 id="retrieving-an-user-by-id">Retrieving an User by Id</h2>

<h2 id="delete-an-user">Delete an User</h2>
